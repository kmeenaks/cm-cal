#----------------------------------------
# EXERCISE 3.3: CONFIGURE KNIFE FOR YOUR ORG
# INSTRUCTIONS: Configure knife operations for chef interactions
# Time: 2-3min
#----------------------------------------

# TODO 1: GENERATE CHEF REPO WORKING DIRECTORY
#---------------------------------------------

## action 1: Generate working director for operations
#########################################

chef generate repo ~/.chef --chef-license ACCEPTANCE

## action 2:  Verify working directory (repo) content
## Review: https://docs.chef.io/chef_repo/
#########################################
ls -al ~/.chef

# TODO 2: CONFIGURE KNIFE
# ---------------------------------------------

## action 3: CONFIGURE KNIFE CONFIG (May have to run  "hostname -f" command seperately and paste the results)
#########################################
cat << EOF > ~/.chef/credentials
[default]
client_name     = 'student'
client_key      = '/home/$(whoami)/.chef/student.pem'
chef_server_url = 'https://$(hostname -f)/organizations/simple'
EOF

# TODO 3: SETUP CHECK SSL CHECKS
# ---------------------------------------------

## action 4: FETCH SERVER CA CERT
#########################################
knife ssl fetch

## action 5: CHECK KNIFE CLIENT AGAINST CA
#########################################
knife ssl check

## action 4: LIST CLIENTS
#########################################
knife client list

# Note: Knife will be used in the next Lesson to upload and run cookbooks

